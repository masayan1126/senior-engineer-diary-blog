---
import { SITE, NAV_ITEMS } from '@/lib/constants';
import { url } from '@/lib/utils';
import DarkModeToggle from './DarkModeToggle.astro';

const currentPath = Astro.url.pathname;
---

<header class="sticky top-0 z-50 border-b border-(--color-border) bg-(--color-bg-primary)/95 backdrop-blur-sm">
  <div class="mx-auto flex h-16 max-w-6xl items-center justify-between px-4">
    <a href={url('/')} class="text-xl font-bold text-(--color-text-primary) hover:text-zinc-600 dark:hover:text-zinc-300 transition-colors">
      {SITE.title}
    </a>

    <nav class="hidden items-center gap-1 md:flex">
      {NAV_ITEMS.map((item) => {
        const fullHref = url(item.href);
        return (
          <a
            href={fullHref}
            class:list={[
              'rounded-lg px-3 py-2 text-sm font-medium transition-colors',
              currentPath === fullHref || (item.href !== '/' && currentPath.startsWith(fullHref))
                ? 'bg-(--color-bg-tertiary) text-(--color-text-primary)'
                : 'text-(--color-text-secondary) hover:bg-(--color-bg-tertiary) hover:text-(--color-text-primary)',
            ]}
          >
            {item.label}
          </a>
        );
      })}
      <DarkModeToggle />
    </nav>

    <div class="flex items-center md:hidden">
      <DarkModeToggle />
    </div>
  </div>
</header>
