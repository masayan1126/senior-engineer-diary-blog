---
import { url } from '@/lib/utils';

const currentPath = Astro.url.pathname;

const items = [
  { label: 'ホーム', href: '/', icon: 'home' },
  { label: 'カテゴリ', href: '/categories', icon: 'category' },
  { label: 'タグ', href: '/tags', icon: 'tag' },
  { label: 'About', href: '/about', icon: 'about' },
];
---

<nav class="fixed bottom-0 left-0 right-0 z-50 border-t border-(--color-border) bg-(--color-bg-primary)/95 backdrop-blur-sm md:hidden" style="padding-bottom: env(safe-area-inset-bottom)">
  <div class="flex h-14 items-center justify-around">
    {items.map((item) => {
      const fullHref = url(item.href);
      const isActive = item.href === '/'
        ? currentPath === fullHref
        : currentPath.startsWith(fullHref);
      return (
        <a
          href={fullHref}
          class:list={[
            'flex flex-col items-center gap-0.5 px-3 py-1 text-xs transition-colors',
            isActive
              ? 'text-zinc-900 dark:text-zinc-100'
              : 'text-(--color-text-tertiary) hover:text-(--color-text-secondary)',
          ]}
        >
          {item.icon === 'home' && (
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
          )}
          {item.icon === 'category' && (
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
            </svg>
          )}
          {item.icon === 'tag' && (
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
            </svg>
          )}
          {item.icon === 'about' && (
            <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
            </svg>
          )}
          <span>{item.label}</span>
        </a>
      );
    })}
  </div>
</nav>
