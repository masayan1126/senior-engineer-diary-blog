---
import { SITE } from '@/lib/constants';
import { url } from '@/lib/utils';
import { getAllCategories, getAllSeries } from '@/lib/content';
import AdSenseDisplay from '@/components/ads/AdSenseDisplay.astro';

const categories = await getAllCategories();
const seriesList = getAllSeries();
---

<aside class="space-y-6">
  <!-- Profile -->
  <div class="rounded-xl border border-(--color-border) bg-(--color-bg-primary) p-6">
    <div class="flex flex-col items-center text-center">
      <img src={`${import.meta.env.BASE_URL}/favicon.svg`} alt={SITE.author} class="mb-3 h-20 w-20 rounded-full object-cover" />
      <h3 class="text-lg font-bold text-(--color-text-primary)">{SITE.author}</h3>
      <p class="mt-2 text-sm text-(--color-text-secondary)">
        Web開発・AI・MCP・Claude Code・ガジェット・ライフハックに関する情報を発信しています。
      </p>
    </div>
  </div>

  <!-- Categories -->
  <div class="rounded-xl border border-(--color-border) bg-(--color-bg-primary) p-6">
    <h3 class="mb-4 text-lg font-bold text-(--color-text-primary)">カテゴリ</h3>
    <ul class="space-y-2">
      {categories.map((cat) => (
        <li>
          <a
            href={url(`/categories/${cat.slug}`)}
            class="flex items-center justify-between rounded-lg px-3 py-2 text-sm text-(--color-text-secondary) hover:bg-(--color-bg-tertiary) hover:text-(--color-text-primary) transition-colors"
          >
            <span>{cat.name}</span>
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </li>
      ))}
    </ul>
  </div>

  <!-- Series -->
  <div class="rounded-xl border border-(--color-border) bg-(--color-bg-primary) p-6">
    <h3 class="mb-4 text-lg font-bold text-(--color-text-primary)">シリーズ</h3>
    <ul class="space-y-2">
      {seriesList.map((s) => (
        <li>
          <a
            href={url(`/series/${s.slug}`)}
            class="flex items-center justify-between rounded-lg px-3 py-2 text-sm text-(--color-text-secondary) hover:bg-(--color-bg-tertiary) hover:text-(--color-text-primary) transition-colors"
          >
            <span>{s.name}</span>
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </a>
        </li>
      ))}
    </ul>
  </div>

  <!-- Ad Space -->
  <AdSenseDisplay />
</aside>
